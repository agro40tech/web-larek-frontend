# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание классов

### Товар

Класс `ProductView` имеет поля связанные с UI элементами, которые инициализируются в конструкторе путем поиска элементов в `container`, который получает через параметры конструктора. Необходим для инициализации html элемента карточки, которая открывается в модальном окне.

### Каталог товаров

Класс `CatalogModel` имеет поле `items`, данное поле является коллекцией `<key, TProduct>` то есть ключа и продукта. Имеет два метода `setItems` которое инициализирует начальное состояние items и `getItems` которое по id возвращает нужный продукт при совпадении.

Класс `CatalogItemView` имеет поля связанные с UI элементами, которые инициализируются в конструкторе путем поиска элементов в `container`, который получает через параметры конструктора. Необходим для инициализации html элемента карточки каталога.

Класс `CatalogView` не имеет полей. Необходим для инициализации html элемента каталога карточек, который состоит из `CatalogItemView`.

### Корзина товаров

Класс `BasketModel` имеет поле `items`, данное поле является коллекцией `<key, number>` то есть ключа и кол-во продукта. Имеет три метода `removeItem` для удаления записи о товаре из корзины, `addItem` для добавления товара в корзину и `changed` для обновления состояний. Так как эта модель требует активного взаимодействия, есть необходимость вызова `dispath` для обновления компонента `BasketView`.

Класс `BasketItemView` имеет поля связанные с UI элементами, которые инициализируются в конструкторе путем поиска элементов в `container`, который получает через параметры конструктора. Необходим для инициализации html элемента карточки в корзине.

Класс `BasketView` не имеет полей. Необходим для инициализации html элемента коллекции товаров корзины, которая состоит из `BasketItemView`.

### Работ с данными пользователя

Класс `DataUserModel` имеет поля: Метод оплаты, адрес доставки, почта, номер телефона. Для удобства метод оплаты вынесен в отдельным enum `EPaymentType`. Данный класс имеет методы, которые устанавливают значения поля и возвращают контекст `this`, это необходимо для постепенной сборки данных, т. к. данные поступают в два этапа: заказ и контакты.

Класс `DataUserOrderView` имеет поля связанные с UI элементами, которые инициализируются в конструкторе путем поиска элементов в `container`, который получает через параметры конструктора. Необходим для инициализации html элемента формы заказа товара.

Класс `DataUserContactsView` имеет поля связанные с UI элементами, которые инициализируются в конструкторе путем поиска элементов в `container`, который получает через параметры конструктора. Необходим для инициализации html элемента формы контактов пользователя.

### Уведомление об успешном заказе

Класс `SuccessOrderView` имеет поле связанное с UI элементом которое инициализируется в конструкторе путем поиска элемента в `container`, который получает через параметры конструктора. Необходим для инициализации html элемента модального окна с оповещением об успешной покупки.

## Логика работы

Используемая архитектура MVP, в качестве презентора служит EventEmmiter.

Для того что бы открыть модальное окно реализован отдельный класс который принимает в конструкторе content, который потом добавляет в контейнер модального окна.

Каталог товаров на главной странице инициализируется при загрузке страницы. Он будет собираться из item-ов и выводится в списке товаров.

Корзина товаров при каком-либо изменении заново рендериться. Собираться из item-ов и выводится в модальном окне корзины.

Форма заказа, как только она будет заполнена при нажатии на кнопку далее если она будет доступна вызовет двойную цепочку сборки данных, которые будут хранится в модели. Так же и с формой контактов, при нажатии оплатить вызовется двойная цепочка сборки данных.

Модальное окно с уведомлением о заказе лишь устанавливает общее значение суммы заказа и выводит эту информацию в модальном окне.
